<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JsonTable Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <style>
      html,body{height:100%;margin:0}
      #app{padding:16px;box-sizing:border-box}
      .caps{font:12px/1.4 system-ui;color:#666}
      /* header height will be synced to JSON editor via JS */
      /* Keep sticky head behavior with Bootstrap table */
      .table-responsive thead th{position:sticky;top:0;background:#f8f9fa;z-index:1}
      /* Remove bottom-only spacing per devtools observation */
      .table-responsive{padding-bottom:0}
      #out-csv-table{margin-bottom:0}
      /* Active column highlight */
      #out-csv-table .col-active{background:rgba(13,110,253,.06)}
      #out-csv-table .col-active{border-left:2px solid #0d6efd !important; border-right:2px solid #0d6efd !important}
      /* Column separators for better visual grouping */
      #out-csv-table th, #out-csv-table td{border-right:1px solid var(--bs-border-color)}
      #out-csv-table th:last-child, #out-csv-table td:last-child{border-right:0}
      /* Ensure empty cells still have reasonable height for overlay */
      #out-csv-table td{padding:0}
      #out-csv-table td .cell-inner{padding:6px 8px; min-height:28px; line-height:1.4}
    </style>
  </head>
  <body>
    <div class="container-fluid p-3">
      <div class="row g-3">
        <div class="col-md-8">
          <div id="app" class="border rounded bg-light"></div>
        </div>
        <div class="col-md-4">
          <div class="mb-2 caps">Header (dynamic)</div>
          <textarea id="out-header" class="form-control" title="Edit header lines; one column per line"></textarea>
        </div>
      </div>
      <div class="row align-items-center g-2 mt-3">
        <div class="col-auto">
          <button id="btn-header" class="btn btn-outline-secondary">Generate Header</button>
        </div>
        <div class="col-auto">
          <button id="btn-csv" class="btn btn-primary">Generate CSV</button>
        </div>
        <div class="col-auto">
          <label class="btn btn-outline-primary mb-0" for="inp-upload-csv">Upload CSV</label>
          <input id="inp-upload-csv" type="file" accept=".csv,text/csv" style="display:none" />
        </div>
        <div class="col-auto">
          <button id="btn-download" class="btn btn-success">Download CSV</button>
        </div>
        <div class="col-auto caps">List Strategy:</div>
        <div class="col-auto form-check">
          <input class="form-check-input" type="radio" name="listStrategy" value="dynamic" id="ls-dyn" checked>
          <label class="form-check-label" for="ls-dyn">dynamic</label>
        </div>
        <div class="col-auto form-check">
          <input class="form-check-input" type="radio" name="listStrategy" value="fixed" id="ls-fix">
          <label class="form-check-label" for="ls-fix">fixed</label>
        </div>
        <div class="col-auto caps">Fixed K:</div>
        <div class="col-auto" style="max-width:100px">
          <input id="inp-k" type="number" min="0" value="3" class="form-control form-control-sm">
        </div>
        <div class="col-auto caps">Gap Mode:</div>
        <div class="col-auto" style="max-width:160px">
          <select id="sel-gap" class="form-select form-select-sm">
            <option value="break" selected>break</option>
            <option value="sparse">sparse</option>
          </select>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-12">
          <div class="mb-2 caps">CSV Preview (Table)</div>
          <div class="table-responsive border rounded bg-light">
            <table id="out-csv-table" class="table table-sm table-striped table-hover align-middle"></table>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="./main.ts"></script>
  </body>
</html>

