<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JsonTable Demo</title>
    <style>
      html,body{height:100%;margin:0}
      #app{padding:16px;box-sizing:border-box}
      .toolbar{display:flex;gap:8px;align-items:center;margin:8px 0}
      .panel{display:grid;grid-template-columns:1fr;gap:8px}
      textarea, pre{width:100%;min-height:120px;padding:8px;box-sizing:border-box;border:1px solid #ddd;border-radius:6px;background:#fafafa}
      pre{margin:0}
      .caps{font:12px/1.4 system-ui;color:#666}
      /* simple table styling for CSV preview */
      .table-wrap{overflow:auto;border:1px solid #ddd;border-radius:6px;background:#fafafa}
      table{border-collapse:collapse;width:100%;min-width:480px;font:12px/1.4 system-ui}
      thead th{position:sticky;top:0;background:#f0f3f6}
      th,td{border:1px solid #e5e7eb;padding:6px 8px;text-align:left;white-space:pre}
    </style>
  </head>
  <body>
    <div id="app"></div>
    <div class="toolbar">
      <button id="btn-header">Generate Header</button>
      <button id="btn-csv">Generate CSV</button>
      <button id="btn-download">Download CSV</button>
      <label class="caps" style="margin-left:12px">List Strategy:</label>
      <label><input type="radio" name="listStrategy" value="dynamic" checked> dynamic</label>
      <label><input type="radio" name="listStrategy" value="fixed"> fixed</label>
      <label class="caps" style="margin-left:12px">Fixed K:</label>
      <input id="inp-k" type="number" min="0" value="3" style="width:64px">
      <label class="caps" style="margin-left:12px">Gap Mode:</label>
      <select id="sel-gap">
        <option value="break" selected>break</option>
        <option value="sparse">sparse</option>
      </select>
    </div>
    <div class="panel">
      <div>
        <div class="caps">Header (dynamic)</div>
        <pre id="out-header" contenteditable="true" title="Edit header lines; one column per line"></pre>
      </div>
      <div>
        <div class="caps">CSV Preview (Table)</div>
        <div class="table-wrap">
          <table id="out-csv-table"></table>
        </div>
      </div>
    </div>
    <script type="module" src="./main.ts"></script>
  </body>
</html>
